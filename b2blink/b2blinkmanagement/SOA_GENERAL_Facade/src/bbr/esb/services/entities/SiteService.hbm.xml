<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.esb.services.entities.SiteService" table="SITE_SERVICE" schema="public">
		<composite-id name="id" class="bbr.esb.services.entities.SiteServiceKey">
			<key-property name="sitekey" access="field" column="SITE_ID" />
			<key-property name="servicekey" access="field" column="SERVICE_ID" />
		</composite-id>
		<property name="active" type="java.lang.Boolean" column="ACTIVE" />
		<many-to-one name="site" column="SITE_ID" not-null="true" insert="false" update="false" />
		<many-to-one name="service" column="SERVICE_ID" not-null="true" insert="false" update="false" />

	<sql-query name="getSiteServiceReport">
			<![CDATA[
			    select
			     SS.SERVICE_ID AS SERVICEKEY,
			     SE.NAME AS SERVICENAME,
			     SS.SITE_ID AS SITEKEY,
			     SI.NAME AS SITENAME,
			     SS.ACTIVE AS ACTIVE
			    from 
				SITE_SERVICE AS SS
				join SITE AS SI ON SS.SITE_ID = SI.ID
				join SERVICE AS SE ON SS.SERVICE_ID = SE.ID
			    order by SE.ID, SI.ID
            ]]>
	</sql-query>		
	</class>
</hibernate-mapping>
