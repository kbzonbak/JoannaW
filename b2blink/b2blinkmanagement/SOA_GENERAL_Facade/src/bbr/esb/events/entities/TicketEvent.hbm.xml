<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.esb.events.entities.TicketEvent" table="TICKETEVENT"
		entity-name="bbr.esb.events.entities.TicketEvent" schema="public" >
		<id name="id" type="java.lang.Long">
			<column name="ID" />
			<generator class="identity">
				<param name="sequence">TICKETEVENT_SEQUENCE</param>
				<param name="parameters">AS BIGINT CACHE 100</param>
			</generator>
		</id>

		<property name="ticketnumber" type="java.lang.Long" not-null="true"></property>		
		<property name="messageid" type="java.lang.String"></property>
		<property name="datecreated" type="java.util.Date" column="DATE_CREATED" not-null="true" />
		<property name="currentstatetypedate" type="timestamp" not-null="true"></property>
		<property name="adjunto" type="java.lang.String"></property>
		<property name="referencia" type="java.lang.String"></property>
		
		<many-to-one name="site" 
			class="bbr.esb.services.entities.Site" column="SITE_ID" 
			not-null="true" insert="true" update="true" />
		<many-to-one name="service" 
			class="bbr.esb.services.entities.Service" column="SERVICE_ID" 
			not-null="true" insert="true" update="true" />
		<many-to-one name="company" 
			class="bbr.esb.users.entities.Company" column="COMPANY_ID" 
			not-null="true" insert="true" update="true" />	
		<many-to-one name="currentstatetype"
			class="bbr.esb.events.entities.TicketStateType" column="CURRENTSTATETYPE_ID"
			not-null="true" />	
		<many-to-one name="user"
			class="bbr.esb.users.entities.User" column="USER_ID" />
			
			
		<sql-query name="ticketreport">	
		SELECT
		te.ticketnumber  nrosolicitud, se.name tiposolicitud,si.retail_name cliente,
		te.date_created fechasolicitud, te.currentstatetypedate fechaproceso, tst.name
		FROM public.ticketevent AS te
		JOIN site AS si ON te.site_id = si.id
		JOIN service AS se ON te.service_id = se.id
		JOIN ticketstatetype AS tst ON te.currentstatetype_id= tst.id
	 	</sql-query>			
	</class>		
</hibernate-mapping>



  


