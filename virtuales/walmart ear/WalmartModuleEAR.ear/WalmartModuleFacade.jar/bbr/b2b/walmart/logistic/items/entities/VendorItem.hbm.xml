<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.walmart.logistic.items.entities.VendorItem" table="VENDORITEM" 
		entity-name="bbr.b2b.walmart.logistic.items.entities.VendorItem" schema="LOGISTICA" > 
		<composite-id name="id" class="bbr.b2b.walmart.logistic.items.entities.VendorItemId">
			<key-property name="vendorid" access="field" type="java.lang.Long" column="VENDOR_ID" />
			<key-property name="itemid" access="field" type="java.lang.Long" column="ITEM_ID" />
		</composite-id>
		
		<property name="vendoritemcode" type="java.lang.String"></property>		
		
		<many-to-one name="vendor" 
			class="bbr.b2b.walmart.logistic.vendors.entities.Vendor" column="VENDOR_ID" 
			not-null="true" insert="false" update="false" />
		<many-to-one name="item" 
			class="bbr.b2b.walmart.logistic.items.entities.Item" column="ITEM_ID" 
			not-null="true" insert="false" update="false" />
		
		
		<sql-query name="getVendorItemDatasofOrder">
			<![CDATA[               
	        	SELECT DISTINCT 
					I.ID, 
					I.CODE,
				  	I.DESCRIPTION,
				  	I.INNERPACK,
				  	I.BARCODE,
				  	I.DEPARTMENT,
					COALESCE (VI.VENDORITEMCODE, '') AS VENDORITEMCODE
					from LOGISTICA.ITEM as I 
					join LOGISTICA.VENDORITEM VI on I.ID = VI.ITEM_ID 
					join LOGISTICA.VENDOR V on VI.VENDOR_ID = V.ID 
					join LOGISTICA.ORDERDETAIL OD on I.ID = OD.ITEM_ID 
					where OD.ORDER_ID = :orderid
					order by ID         
			]]>
		</sql-query>		
		
		
	</class>
</hibernate-mapping>
