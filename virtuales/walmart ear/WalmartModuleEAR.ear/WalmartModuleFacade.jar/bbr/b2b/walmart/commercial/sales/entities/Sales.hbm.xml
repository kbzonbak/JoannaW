<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.walmart.commercial.sales.entities.Sales" table="SALES"
		entity-name="bbr.b2b.walmart.commercial.sales.entities.Sales" schema="COMERCIAL">
		<id name="id" type="java.lang.Long">
			<column name="ID" />
			<generator class="identity">
				<param name="sequence">SALES_SEQUENCE</param>
				<param name="parameters">AS BIGINT CACHE 100</param>
			</generator>
		</id>	
		
		<property name="loaddate" type="timestamp"/> 
		
		<property name="sales_specific_price" type="java.lang.Double"/> 
		<property name="sales_u" type="java.lang.Integer"/> 
		<property name="sales_pc" type="java.lang.Double" /> 
		<property name="sales_pv" type="java.lang.Double" /> 
		<property name="enpro_u" type="java.lang.Integer"/> 
		<property name="enpro_cost" type="java.lang.Double" />		
		<property name="vendorcode" type="java.lang.String" /> 
		<property name="vendorname" type="java.lang.String" />  
		<property name="itemcode" type="java.lang.String"></property>
		<property name="itemdescription" type="java.lang.String"></property>
		<property name="itemupc" type="java.lang.String"></property>
		<property name="itembrand" type="java.lang.String"></property>
		<property name="locationcode" type="java.lang.String"></property>
		<property name="locationname" type="java.lang.String"></property>
			

		<many-to-one name="credential" class="bbr.b2b.walmart.commercial.vendors.entities.VendorCredential" column="CREDENTIAL_ID" not-null="true"/>
		<many-to-one name="salestype" class="bbr.b2b.walmart.commercial.sales.entities.SalesType" column="SALESTYPE_ID"	not-null="true" />		
					
		<sql-query name="getSalesReportByDate">
			<![CDATA[
				SELECT DISTINCT
					SA.ITEMCODE AS ITEMCODE,
					SA.ITEMDESCRIPTION AS ITEMNAME,	
					SA.ITEMUPC AS UPC,
					SA.ITEMBRAND AS BRAND,																		
					SA.LOCATIONCODE AS LOCATIONCODE,
					SA.LOCATIONNAME AS LOCATIONNAME,						
					SA.VENDORCODE AS VENDORCODE,
					SA.SALES_SPECIFIC_PRICE AS SALES_SPECIFIC_PRICE,
					SAT.DESCRIPTION AS SALESDESCRIPTION,
					SA.SALES_U AS SALES_U,
					SA.SALES_PC AS SALES_PC,
					SA.SALES_PV AS SALES_PV,
					SA.ENPRO_U AS ENPRO_U,
					SA.ENPRO_COST AS ENPRO_COST,
					REPLACE(SA.VENDORNAME, '"', '''') AS VENDORNAME, 
					SA.VENDORCODE AS VENDORCODE
				FROM
					COMERCIAL.SALES SA JOIN
					COMERCIAL.SALESTYPE SAT ON SAT.ID = SA.SALESTYPE_ID						
				WHERE
					:now = TO_CHAR(SA.LOADDATE, 'yyyy-mm-dd')
				
					
			]]>
		</sql-query>
			
	</class>	
</hibernate-mapping>
