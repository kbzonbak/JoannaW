<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.regional.logistic.couriers.entities.CourierTicketDetail" table="COURIERTICKETDETAIL"
		entity-name="bbr.b2b.regional.logistic.couriers.entities.CourierTicketDetail" schema="LOGISTICA" >
		<composite-id name="id" class="bbr.b2b.regional.logistic.couriers.entities.CourierTicketDetailId">
			<key-property name="courierticketid" access="field" type="java.lang.Long" column="COURIERTICKET_ID" />
			<key-property name="dodeliveryid" access="field" type="java.lang.Long" column="DODELIVERY_ID" />
		</composite-id>

		<property name="processed" type="java.lang.Boolean" not-null="true"></property>		
		<property name="startdate" type="timestamp" ></property>
		<property name="success" type="java.lang.Boolean" not-null="true"></property>
		<property name="result" type="java.lang.String" ></property>
				
		<many-to-one name="courierticket" 
			class="bbr.b2b.regional.logistic.couriers.entities.CourierTicket" column="COURIERTICKET_ID" 
			not-null="true" insert="false" update="false" />
		<many-to-one name="dodelivery" 
			class="bbr.b2b.regional.logistic.deliveries.entities.DODelivery" column="DODELIVERY_ID" 
			not-null="true" insert="false" update="false" />
			
		<sql-query name="getMailInfoByCourierTicket">
			<![CDATA[
				SELECT
					oc.number AS directordernumber,
					dod.number AS dodeliverynumber,
					ctd.result AS courierticketdetailresult
				FROM
					logistica.courierticketdetail AS ctd JOIN
					logistica.dodelivery AS dod ON dod.id = ctd.dodelivery_id JOIN
					logistica.directorder AS oc ON oc.dodelivery_id = dod.id
				WHERE	
					courierticket_id = :ticketid					
			]]>
		</sql-query>			
					
	</class>		
</hibernate-mapping>




