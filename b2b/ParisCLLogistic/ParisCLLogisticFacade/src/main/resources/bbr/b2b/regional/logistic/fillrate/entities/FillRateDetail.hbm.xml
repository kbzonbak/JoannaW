<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.regional.logistic.fillrate.entities.FillRateDetail" table="FILLRATEDETAIL" 
		entity-name="bbr.b2b.regional.logistic.fillrate.entities.FillRateDetail" schema="LOGISTICA" > 
		<composite-id name="id" class="bbr.b2b.regional.logistic.fillrate.entities.FillRateDetailId">
			<key-property name="fillrateid" access="field" type="java.lang.Long" column="FILLRATE_ID" />
			<key-property name="itemid" access="field" type="java.lang.Long" column="ITEM_ID" />
		</composite-id>

		<property name="totalunits" type="java.lang.Double" not-null="true"></property>
		<property name="receivedunits" type="java.lang.Double" not-null="true"></property>
		
		<many-to-one name="fillrate" 
			class="bbr.b2b.regional.logistic.fillrate.entities.FillRate" column="FILLRATE_ID" 
			not-null="true" insert="false" update="false" />
		<many-to-one name="item" 
			class="bbr.b2b.regional.logistic.items.entities.Item" column="ITEM_ID" 
			not-null="true" insert="false" update="false" />
		
		<sql-query name="getFillRateDetailReportByFillRate">
			<![CDATA[	
				SELECT
					IT.INTERNALCODE AS ITEMSKU,
					FRD.TOTALUNITS AS NEEDEDUNITS,
					FRD.RECEIVEDUNITS,
					(FRD.RECEIVEDUNITS / FRD.TOTALUNITS * 100) AS UNITSFILLRATE
				FROM
					LOGISTICA.FILLRATEDETAIL FRD JOIN
					LOGISTICA.ITEM IT ON IT.ID = FRD.ITEM_ID
				WHERE FRD.FILLRATE_ID = :fillrateid
			]]>
		</sql-query>		
				
	</class>
</hibernate-mapping>
