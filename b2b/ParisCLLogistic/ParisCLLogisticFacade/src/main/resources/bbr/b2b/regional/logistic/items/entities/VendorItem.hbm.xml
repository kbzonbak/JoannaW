<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.regional.logistic.items.entities.VendorItem" table="VENDORITEM" 
		entity-name="bbr.b2b.regional.logistic.items.entities.VendorItem" schema="LOGISTICA" > 
		<composite-id name="id" class="bbr.b2b.regional.logistic.items.entities.VendorItemId">
			<key-property name="vendorid" access="field" type="java.lang.Long" column="VENDOR_ID" />
			<key-property name="itemid" access="field" type="java.lang.Long" column="ITEM_ID" />
		</composite-id>

		<property name="vendoritemcode" type="java.lang.String"></property>
        <property name="directdelivery" type="java.lang.Boolean"></property>
        
		<many-to-one name="vendor" 
			class="bbr.b2b.regional.logistic.vendors.entities.Vendor" column="VENDOR_ID" 
			not-null="true" insert="false" update="false" />
		<many-to-one name="item" 
			class="bbr.b2b.regional.logistic.items.entities.Item" column="ITEM_ID" 
			not-null="true" insert="false" update="false" />
		
		<sql-query name="getVendorItemDataofOrder">
			<![CDATA[	
				SELECT DISTINCT 
					i.id, i.name, i.barcode, i.internalcode, i.ean1, i.ean2, i.ean3, i.trademark, i.color, i.dimension, i.size, i.innerpack,
					i.casepack, COALESCE(i.flowtype_id, -1) AS flowtypeid, COALESCE(i.unit_id, -1) AS unitid,
					COALESCE(i.itemclass_id, -1) AS itemclassid, vi.vendoritemcode, vi.directdelivery
				FROM
					logistica.item AS i JOIN
					logistica.vendoritem AS vi ON vi.item_id = i.id JOIN
					logistica.vendor AS v ON v.id = vi.vendor_id JOIN
					logistica.orderdetail AS odt ON odt.item_id = i.id JOIN
					logistica.order AS o ON o.id = odt.order_id AND o.vendor_id = v.id
				WHERE
					o.id = :orderid 
				ORDER BY
					id
			]]>
		</sql-query>	

		<sql-query name="getVendorItemDataofDirectOrder">
			<![CDATA[	
				SELECT DISTINCT 
					i.id, i.name, i.barcode, i.internalcode, i.ean1, i.ean2, i.ean3, i.trademark, i.color, i.dimension, i.size, i.innerpack,
					i.casepack, COALESCE(i.flowtype_id, -1) AS flowtypeid, COALESCE(i.unit_id, -1) AS unitid,
					COALESCE(i.itemclass_id, -1) AS itemclassid, vi.vendoritemcode, vi.directdelivery
				FROM 
					logistica.item AS i JOIN
					logistica.vendoritem AS vi ON vi.item_id = i.id JOIN
					logistica.vendor AS v ON v.id = vi.vendor_id JOIN
					logistica.directorderdetail AS odt ON odt.item_id = i.id JOIN 
					logistica.directorder AS o ON o.id = odt.order_id AND o.vendor_id = v.id
				WHERE
					o.id = :orderid 
				ORDER BY
					id
			]]>
		</sql-query>	
		
				<sql-query name="getVendorItemVevByVendorAndSku">
			<![CDATA[	
				SELECT 
					IT.INTERNALCODE AS ITEMSKU,
					IT.NAME AS DESCRIPTION,
					IT.VEV AS VEV, 
					VI.VENDORITEMCODE AS VENDORITEMCODE					
				FROM 
					LOGISTICA.VENDORITEM AS VI
					JOIN LOGISTICA.ITEM AS IT ON (IT.ID = VI.ITEM_ID)
				WHERE 
					VI.VENDOR_ID = :vendorid AND IT.INTERNALCODE = :itemcode AND IT.VEV = true
				ORDER BY ID
			]]>
		</sql-query>
				
			
	</class>
</hibernate-mapping>
