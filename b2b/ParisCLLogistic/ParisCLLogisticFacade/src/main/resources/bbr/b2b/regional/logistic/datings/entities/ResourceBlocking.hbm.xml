<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<joined-subclass name="bbr.b2b.regional.logistic.datings.entities.ResourceBlocking" table="RESOURCEBLOCKING" 
		entity-name="bbr.b2b.regional.logistic.datings.entities.ResourceBlocking" extends="bbr.b2b.regional.logistic.datings.entities.Reserve" schema="LOGISTICA">
		<key column ="ID" />
			
		<property name="comment" type="java.lang.String" length="250"/>
							
		<many-to-one name="blockinggroup"
			class="bbr.b2b.regional.logistic.datings.entities.ResourceBlockingGroup" column="BLOCKINGGROUP_ID" 
			not-null="false" />					
					
		<sql-query name="getResourceBlockingsByDateAndLocation">
			<![CDATA[               
	           SELECT
					RS.ID, 
					RS.WHEN1 AS WHEN,
					RS.LOCATION_ID AS LOCATIONID,
					RB.BLOCKINGGROUP_ID AS BLOCKINGGROUPID
				FROM 
					LOGISTICA.RESERVE RS JOIN 
					LOGISTICA.RESOURCEBLOCKING RB ON RS.ID = RB.ID 
				WHERE 
					RS.WHEN1 >= :since AND
					RS.WHEN1 < :until AND
      				RS.LOCATION_ID = :locationid 
				]]>
		</sql-query>
		
		
		<sql-query name="doDeleteResourceBlockingsofResourceBlockingGroup">
			<![CDATA[				
				delete from LOGISTICA.RESOURCEBLOCKING where BLOCKINGGROUP_ID = :blockingroupid
			]]>
		</sql-query>		
	</joined-subclass>
</hibernate-mapping>
