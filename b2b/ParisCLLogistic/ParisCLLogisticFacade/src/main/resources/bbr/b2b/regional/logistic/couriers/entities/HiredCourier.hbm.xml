<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
	Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
	<class name="bbr.b2b.regional.logistic.couriers.entities.HiredCourier" table="HIREDCOURIER"
		entity-name="bbr.b2b.regional.logistic.couriers.entities.HiredCourier" schema="LOGISTICA" >
		<composite-id name="id" class="bbr.b2b.regional.logistic.couriers.entities.HiredCourierId">
			<key-property name="vendorid" access="field" type="java.lang.Long" column="VENDOR_ID" />
			<key-property name="courierid" access="field" type="java.lang.Long" column="COURIER_ID" />
		</composite-id>

		<property name="user" type="java.lang.String" not-null="true" column="user1"></property>		
		<property name="password" type="java.lang.String" not-null="true"></property>
		<property name="clientcode" type="java.lang.String"></property>
		<property name="creationdate" type="timestamp"></property>
		<property name="updatedate" type="timestamp"></property>
				
		<many-to-one name="vendor" 
			class="bbr.b2b.regional.logistic.vendors.entities.Vendor" column="VENDOR_ID" 
			not-null="true" insert="false" update="false"/>
		<many-to-one name="courier" 
			class="bbr.b2b.regional.logistic.couriers.entities.Courier" column="COURIER_ID" 
			not-null="true" insert="false" update="false"/>
		
		<sql-query name="getByVendor">
			<![CDATA[	
				SELECT 
				COUNT(1)
				FROM LOGISTICA.HIREDCOURIER HC WHERE HC.VENDOR_ID = :VENDORID
			]]>
		</sql-query>	
		
		<sql-query name="getAllVendorsHiredCourier">
			<![CDATA[	
			select v.code,v.name,c.description, hc.clientcode, hc.user1 as user, hc.password,
			hc.courier_id courierid, hc.vendor_id vendorid
			from logistica.courier c 
			join logistica.hiredcourier hc on hc.courier_id = c.id 
			join logistica.vendor v on hc.vendor_id = v.id 
			where v.domestic = true
			]]>
		</sql-query>			
					
	</class>		
</hibernate-mapping>




